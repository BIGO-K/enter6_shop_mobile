<!DOCTYPE html>
<html lang="ko" class="__mm_popup__">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="format-detection" content="telephone=no, address=no, email=no">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="mobile-web-app-capable" content="yes">

	<!-- 소셜태그 -->
	<meta property="og:title" content="">
	<meta property="og:description" content="">
	<meta property="og:image" content="">
	<meta property="og:url" content="">
	<meta property="og:site_name" content="">
	<!--// 소셜태그 -->

	<title>(팝업) "[5월 이벤트] 매일매일 출석하고 가세요! 출석체크할 때마다! 100포인트 증정" 이벤트/혜택 - 엔터식스 온라인몰</title>

	<!-- 라이브러리 css -->
	<link rel="stylesheet" href="../css/libs/fontello-custom.css">
	<link rel="stylesheet" href="../css/libs/swiper-4.4.6.min.css">
	<link rel="stylesheet" href="../css/libs/overlayscrollbars-1.6.1.min.css">
	<link rel="stylesheet" href="../css/libs/pikaday.css">

	<!-- 페이지 css -->
	<link rel="stylesheet" class="link_font" resource="../css/fonts.css">
	<link rel="stylesheet" href="../css/fonts_early.css">
	<link rel="stylesheet" href="../css/app.css">

	<!-- (D) 스크립트(폴리필, 라이브러리)는 요청을 줄이기 위해 combind + minify를 적용해주세요. -->
	<!-- 폴리필 스크립트 -->
	<script src="../js/polyfill/es6-promise.auto-4.2.4.min.js"></script>

	<!-- 라이브러리 스크립트 -->
	<!-- <script src="../js/libs/webfontloader-1.6.28.min.js"></script> -->
	<script src="../js/libs/jquery-3.3.1.slim.min.js"></script>
	<script src="../js/libs/axios-0.18.0.min.js"></script>
	<script src="../js/libs/underscore-1.9.1.min.js"></script>
	<script src="../js/libs/load-image.all-2.20.1.min.js"></script>
	<script src="../js/libs/tweenmax-2.0.2.min.js"></script>
	<script src="../js/libs/swiper-4.4.6.min.js"></script>
	<script src="../js/libs/sortable-1.6.0.min.js"></script>
	<script src="../js/libs/moment-2.23.0.min.js"></script>
	<!-- <script src="../js/libs/cleave-1.4.7.min.js"></script> -->
	<!-- <script src="../js/libs/cleave-1.4.7.phone.kr.js"></script> -->
	<!-- <script src="../js/libs/overlayscrollbars-1.6.1.min.js"></script> -->
	<!-- <script src="../js/libs/pikaday-1.8.0.min.js"></script> -->
	<!-- <script src="../js/libs/handlebars-4.0.12.min.js"></script> -->
	<!-- <script src="../js/libs/template7-1.4.0.min.js"></script> -->
	<!-- <script src="../js/libs/vue-2.5.21.min.js"></script> -->
	<!-- <script src="../js/libs/autoNumeric-4.1.0.min.js"></script> -->
	<!-- <script src="../js/libs/chart-2.7.3.min.js"></script> -->
	<!-- <script src="../js/libs/ckeditor.full-4.10.0/ckeditor.js"></script> -->

	<!-- 공통 선언 스크립트 -->
	<script src="../js/app_common.js"></script>

	<!-- (D) 페이지 공통 스크립트는 body 하단, 전용 스크립트는 .mm_page-content 하단에 넣어주세요. -->
</head>
<body>
	<div id="mm_app" class="mm_app">
		<!-- 스킵 -->
		<nav class="mm_skip">
			<ul>
				<li><a href="#mm_body" data-href="anchor">본문바로가기</a></li>
			</ul>
		</nav>
		<!-- 스킵 -->

		<!-- 화면 -->
		<div class="mm_view">
			<!-- 헤더 -->
			<div class="mm_header">
				<h1><span>이벤트/혜택</span></h1>
				<div class="mm_box-lside">
					<a href="#" data-href="{ '_type': 'back' }"><i class="mco_back"></i><span class="mm_ir-blind">뒤로가기</span></a>
				</div>
				<button type="button" class="btn_popup-close" onclick="mm.popup.close();"><i class="mco_popup-close"></i><span class="mm_ir-blind">팝업 닫기</span></button>
			</div>
			<!--// 헤더 -->

			<!-- 내용 -->
			<div id="mm_body" class="mm_page">
				<div class="mm_scroller">
					<div class="mm_box-flexcolumn">
						<!-- 본문 -->
						<div class="mm_page-content">
							<!-- (D) 실제 내용을 추가하는 부분입니다. -->

							<!-- (D) iframe 팝업은 html 요소에 '__mm_popup__' 클래스를 추가합니다. -->
							<section class="m-popup-event-jumbotron">
								<h3><span>[5월 이벤트] 매일매일 출석하고 가세요!<br>출석체크할 때마다! 100포인트 증정</span></h3>
								<div class="m-popup-event-attendance">
									<div class="m--attendance-title">
										<h4 class="mm_ir-blind">매일매일 출석하고 가세요!</h4>
										<p class="mm_ir-blind">출석체크할 때마다! 매일 100포인트 증정</p>
										<p><span class="mm_ir-blind">나의 출석일</span><strong class="text_count">13</strong><span class="mm_ir-blind">일</span></p>
									</div>
									<ul class="m--attendance-list">
										<li title="출석완료"><i class="image_stamp"></i><span>100<small>POINT</small></span></li>
										<li title="출석완료"><i class="image_stamp"></i><span>100<small>POINT</small></span></li>
										<li title="출석완료"><i class="image_stamp"></i><span>100<small>POINT</small></span></li>
										<li><button type="button"><i class="image_stamp"></i><span>100<small>POINT</small></span></button></li>
										<li><button type="button"><i class="image_stamp"></i><span>100<small>POINT</small></span></button></li>
										<li><button type="button"><i class="image_stamp"></i><span>100<small>POINT</small></span></button></li>
										<li><button type="button"><i class="image_stamp"></i><span>100<small>POINT</small></span></button></li>
										<li><button type="button"><i class="image_stamp"></i><span>100<small>POINT</small></span></button></li>
										<li><button type="button"><i class="image_stamp"></i><span>100<small>POINT</small></span></button></li>
										<li><button type="button"><i class="image_stamp"></i><span>100<small>POINT</small></span></button></li>
										<li><button type="button"><i class="image_stamp"></i><span>100<small>POINT</small></span></button></li>
										<li><button type="button"><i class="image_stamp"></i><span>100<small>POINT</small></span></button></li>
										<li><button type="button"><i class="image_stamp"></i><span>100<small>POINT</small></span></button></li>
										<li><button type="button"><i class="image_stamp"></i><span>100<small>POINT</small></span></button></li>
										<li><button type="button"><i class="image_stamp"></i><span>100<small>POINT</small></span></button></li>
										<li><button type="button"><i class="image_stamp"></i><span>100<small>POINT</small></span></button></li>
										<li><button type="button"><i class="image_stamp"></i><span>100<small>POINT</small></span></button></li>
										<li><button type="button"><i class="image_stamp"></i><span>100<small>POINT</small></span></button></li>
										<li><button type="button"><i class="image_stamp"></i><span>100<small>POINT</small></span></button></li>
										<li><button type="button"><i class="image_stamp"></i><span>100<small>POINT</small></span></button></li>
										<li><button type="button"><i class="image_stamp"></i><span>100<small>POINT</small></span></button></li>
										<li><button type="button"><i class="image_stamp"></i><span>100<small>POINT</small></span></button></li>
										<li><button type="button"><i class="image_stamp"></i><span>100<small>POINT</small></span></button></li>
										<li><button type="button"><i class="image_stamp"></i><span>100<small>POINT</small></span></button></li>
										<li><button type="button"><i class="image_stamp"></i><span>100<small>POINT</small></span></button></li>
									</ul>
									<div class="m--attendance-attention">
										<h5 class="mm_ir-blind">유의사항</h5>
										<ul class="mm_ir-blind">
											<li>해당 이벤트는 1일 1회만 참여 가능합니다</li>
											<li>엔터식스 쇼핑몰 회원에 한해서만 참여 가능합니다</li>
											<li>본 이벤트는 당사의 사정에 따라 사전 공지 없이 종료되거나 변경될 수 있습니다</li>
										</ul>
									</div>
								</div>
							</section>

							<!-- 현재 페이지 스크립트 -->
							<script>
								$(function() {

									var $attendance = $('.m--attendance-list');
									$attendance.on('click', 'button', function() {

										$attendance.find('button').attr({ 'disabled': true });

										mm.ajax.load('../json/event_attendance.json', {
											configs: {
												responseType: 'json',
											},
											onComplete: function(__data) {

												// login :number - 0 로그인 전 / 1 로그인 후
												// chance :number - 0 출석완료 / 1 출석가능
												// result :number - 1 성공 / 그 외 실패
												if (__data.login == 0) {
													mm.bom.alert('로그인이 필요합니다.');
												}
												else {
													if (__data.chance == 0) {
														mm.bom.alert('1일 1회만 참여 가능합니다.');
													}
													else {
														// 정상연동
														if (__data.result == 1) {
															$attendance.find('li').not('[title]').eq(0).replaceWith('<li title="출석완료"><i class="image_stamp"></i><span>100<small>POINT</small></span></li>');
															mm.bom.alert('100포인트가 지급되었습니다.', function() {

																// location.reload();// 완료 후 새로고침

															}, { _title: '출석완료' });
														}
														// 연동실패
														else {
															mm.bom.alert('요청을 처리하는 중 오류가 발생했습니다<br>잠시 후에 다시 시도해주세요');
														}
													}
												}

											},
											onError: function(__error) {

												console.log('error', arguments);

											},
										});

									});

								});
							</script>
						</div>
						<!--// 본문 -->
					</div>
					<a href="#mm_app" class="btn_topmost" data-href="{ '_type': 'anchor' }" title="페이지 처음으로 가기"><i class="mco_topmost"></i><span>TOP</span></a>
				</div>
			</div>
			<!--// 내용 -->
		</div>
		<!--// 화면 -->

		<!-- 공통 페이지 스크립트 -->
		<script src="../js/app_page-common.js"></script>
	</div>
</body>
</html>
